# Минимально жизнеспособный продукт

## Статус

*Какой статус, такой как предлагаемый (proposed), принятый (accepted), отклоненный(rejected), устаревший (deprecated), заменен (superseded) и т.д.?*

2023-05-07 предлагаемый

## Контекст

*Какая проблема мотивирует это решение или изменение?*

Проблема состоит в том, что нужен гибкий, расширяемый инструмент для создания ADR, а также управления ADR.

Какие фитчи нужны проекту(adr-tools):

1. команды version и help
2. возможность создавать adr'ку на основе темплейта
3. возможность выбора темплейта из встроенных (популярных вариантов)
4. возможность добавления кастомных темплейтов и выбора из них (.adrrc)
5. возможность менять статус adr'ок
6. возможность выполнять поиск по adr'кам
7. возможность просмотра списка adr'ок
8. возможность генерировать toc (table of contents)
9. возможность граф связей между adr'ми
10. возможность просмотр логи изменения статусов конкретной adr
11. возможность выбора языка (i18n) для инструмента и темплейта (.adrrc)
12. возможность расширения, т.е. добавление нового языка (i18n) для инструмента и темплейта (.adrrc)
13. возможность связывать adr, т.е. создавать родительский adr и от него делать дочерние adr
14. возможность экспортировать adr'ки в json, csv, html
15. возможность сжатия медиафайлов (фотографий) в adr'ках

Данные фитчи были вдохновлены проектами:

- [npryce](https://github.com/npryce/adr-tools)
- [phodal](https://github.com/phodal/adr)
- [TulioHector](https://github.com/TulioHector/adr-tool)
- [meza](https://github.com/meza/adr-tools)

**Нужно выбрать основные фитчи, которые необходимы для запуска MVP.**

Данные фитчи, на мой взгляд, являются базовыми и их нужно реализовать в MVP:

1. команды version и help
    данные команды являются базовыми для любого инструмента. Команда version позволяет получить текущую версию, команда help отображает список все команд, или детальную информацию по конкретной команде.
2. возможность создавать adr'ку на основе темплейта.
    Создание ADR на основе темплейта - это основная фитча для этого проекта.
3. возможность выбора темплейта из встроенных (популярных вариантов)
    Выбор темплейта является базовой потребностью, которая будет только расширяться в будущем кастомными темплейтами. Со временем популярные кастомные темплейты могут быть добавлены в проект, если пользователи за них проголосуют. Изначально планирую добавить 2 темплейта: default/nygard (от Michael Nygard) и blank (пустой, только заголовок).
4. возможность менять статус adr'ок
    Изменение статуса - это базовый процесс ADR, по которому видно, что происходило с ADR и в каком состояние она находится сейчас.

Доп фитчи будут рассматриваться отдельно (в других adr'ках):

1. возможность добавления кастомных темплейтов и выбора из них (.adrrc)
2. возможность выбора языка (i18n) для инструмента и темплейта (.adrrc)
3. возможность расширения, т.е. добавление нового языка (i18n) для инструмента и темплейта (.adrrc)
4. возможность выполнять поиск по adr'кам
5. возможность просмотра списка adr'ок
6. возможность генерировать toc (table of contents)
7. возможность граф связей между adr'ми
8. возможность просмотр логи изменения статусов конкретной adr
9. возможность связывать adr, т.е. создавать родительский adr и от него делать дочерние adr
10. возможность экспортировать adr'ки в json, csv, html
11. возможность сжатия медиафайлов (фотографий) в adr'ках

## Решение

*Какое изменение мы предлагаем и/или делаем?*

1. [Общая архитектура проекта](./0002-0001-design.md)
2. Нужно определиться с технологиями
    Для данного проекта буду использовать node.js/ts.
    Для реализации CLI буду использовать библиотеки: commander.js, inquirer.js и listr. Для стилизации CLI - chalk.
    Выше перечислены основные либы, но также библиотеки могу добавляться по мере нужды.
3. Ограничения проекта, по количеству ADR - 9999.


Для парсинга конфига .adrrc можно написать либу на основе [rc-parser](https://github.com/kaelzhang/rc-parser/tree/master)

## Последствия

*Что становится проще или труднее сделать из-за этого изменения?*

1. Разделение фитч на mvp и дополнительные позволит, выкатить проект быстрее и распараллелить работу над ними.
2. С другой стороны, первая версия проекта не будет полной и будет уступать аналогичным проектам по набору фитч.
3. Для удобства форматирования списка ADR было принято решение (на основание опыта других проектов) использовать префикс с номером ADR: 0001, 0002 и т.д. Добавление нулей в начале позволит удобно форматировать, но дальше форматирование может сломаться, поэтому имеет смысл ограничить число ADR. Если будут реальные кейсы, в которых adr'ок больше 9999, то стоит увеличить лимит или сделать форматирование гибким с автоизмением всех индексов всех файлов по достижению нового разряда. На данный момент, лимит в 9999 кажется достаточным, а реализация динамического форматирования избыточным.